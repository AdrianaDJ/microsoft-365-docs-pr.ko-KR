---
title: 메일 흐름 규칙을 사용하여 실행 파일이 포함된 메시지 차단
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: c4fb4a86-b772-49d0-8773-e8ee897e175d
ms.custom:
- seo-marvel-apr2020
description: 관리자는 메일 흐름 규칙(전송 규칙)을 사용하여 실행 파일이 포함된 메시지를 차단하는 방법을 학습할 수 있습니다.
ms.openlocfilehash: b78fd282e6b5a7f20d1dab830da296e4be4ac812
ms.sourcegitcommit: e12fa502bc216f6083ef5666f693a04bb727d4df
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/20/2020
ms.locfileid: "46827656"
---
# <a name="use-mail-flow-rules-to-block-messages-with-executable-attachments-in-eop"></a><span data-ttu-id="b3bb3-103">메일 흐름 규칙을 사용하여 EOP에서 실행 파일이 첨부된 메시지 차단</span><span class="sxs-lookup"><span data-stu-id="b3bb3-103">Use mail flow rules to block messages with executable attachments in EOP</span></span>

<span data-ttu-id="b3bb3-104">Exchange Online 사서함이 있는 Microsoft 365 조직 또는 Exchange Online 사서함이 없는 독립 실행형 EOP(Exchange Online Protection) 조직에서 EOP는 맬웨어 방지 정책을 사용하여 실행 파일이 포함된 메시지를 포함한 유해한 메시지를 차단합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-104">In Microsoft 365 organizations with mailboxes in Exchange Online or standalone Exchange Online Protection (EOP) organizations without Exchange Online mailboxes, EOP uses anti-malware policies to block harmful messages, including messages with executable attachments.</span></span> <span data-ttu-id="b3bb3-105">자세한 내용은 [EOP에서 맬웨어 방지 보호 기능을 참조하세요.](anti-malware-protection.md)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-105">For more information, see [Anti-malware protection in EOP](anti-malware-protection.md).</span></span>

<span data-ttu-id="b3bb3-106">보호를 강화하려면 메일 흐름 규칙(전송 규칙이라고도 함)을 사용하여 이 항목에서 설명한 실행 파일 첨부 파일이 포함된 메시지를 식별하고 차단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-106">To further enhance protection, you can use mail flow rules (also known as transport rules) to identify and block messages that contain executable attachments as described in this topic.</span></span>

<span data-ttu-id="b3bb3-107">예를 들어 맬웨어가 발생한 후 회사에서는 영향을 받은 사용자가 지정된 기간 후 첨부 파일을 다시 보낼 수 있도록 시간 제한을 지정하여 이 규칙을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-107">For example, following a malware outbreak, a company could apply this rule with a time limit so that affected users can get back to sending attachments after a specified length of time.</span></span>

## <a name="what-do-you-need-to-know-before-you-begin"></a><span data-ttu-id="b3bb3-108">시작하기 전에 알아야 할 내용은 무엇인가요?</span><span class="sxs-lookup"><span data-stu-id="b3bb3-108">What do you need to know before you begin?</span></span>

- <span data-ttu-id="b3bb3-109">이러한 절차를 수행하려면 먼저 사용 권한을 할당만 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-109">You need to be assigned permissions before you can do these procedures:</span></span>

  - <span data-ttu-id="b3bb3-110">Exchange Online에서 Exchange Online의 기능 사용 권한에서 "메일 [흐름" 항목을 참조하세요.](https://docs.microsoft.com/Exchange/permissions-exo/feature-permissions)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-110">In Exchange Online, see the "Mail flow" entry in [Feature Permissions in Exchange Online](https://docs.microsoft.com/Exchange/permissions-exo/feature-permissions).</span></span>
  
  - <span data-ttu-id="b3bb3-111">독립 실행형 EOP에는 기본적으로 OrganizationManagement, ComplianceManagement 및 RecordsManagement 역할에 할당된 전송 규칙 역할이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-111">In standalone EOP, you need the Transport Rules role, which is assigned to the OrganizationManagement, ComplianceManagement, and RecordsManagement roles by default.</span></span> <span data-ttu-id="b3bb3-112">자세한 내용은 독립 [실행형 EOP의 사용 권한을 참조하고](feature-permissions-in-eop.md) [EAC를 사용하여 역할 그룹의 구성원 목록을 수정합니다.](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-112">For more information, see [Permissions in standalone EOP](feature-permissions-in-eop.md) and [Use the EAC modify the list of members in role groups](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups).</span></span>

- <span data-ttu-id="b3bb3-113">Exchange Online에서 EAC를 열려면 Exchange Online의 [Exchange 관리 센터를 참조하세요.](https://docs.microsoft.com/Exchange/exchange-admin-center)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-113">To open the EAC in Exchange Online, see [Exchange admin center in Exchange Online](https://docs.microsoft.com/Exchange/exchange-admin-center).</span></span> <span data-ttu-id="b3bb3-114">독립 실행형 EOP에서 EAC를 열려면 Exchange [관리 센터를 통해 독립 실행형 EOP를 참조하세요.](exchange-admin-center-in-exchange-online-protection-eop.md)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-114">To open the EAC in standalone EOP, see [Exchange admin center in standalone EOP](exchange-admin-center-in-exchange-online-protection-eop.md).</span></span>

- <span data-ttu-id="b3bb3-115">Exchange Online PowerShell에 연결하려면 [Exchange Online PowerShell에 연결](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-115">To connect to Exchange Online PowerShell, see [Connect to Exchange Online PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell).</span></span> <span data-ttu-id="b3bb3-116">독립 실행형 EOP PowerShell에 연결하려면 [Exchange Online Protection PowerShell에 연결](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-protection-powershell)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-116">To connect to standalone EOP PowerShell, see [Connect to Exchange Online Protection PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-protection-powershell).</span></span>

- <span data-ttu-id="b3bb3-117">Exchange Online 및 독립 실행형 EOP의 메일 흐름 규칙에 대한 자세한 내용은 다음 항목을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-117">For more information about mail flow rules in Exchange Online and standalone EOP, see the following topics:</span></span>

  - [<span data-ttu-id="b3bb3-118">Exchange Online의 메일 흐름 규칙(전송 규칙)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-118">Mail flow rules (transport rules) in Exchange Online</span></span>](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rules)

  - [<span data-ttu-id="b3bb3-119">Exchange Online의 메일 흐름 규칙 조건 및 예외(조건자)</span><span class="sxs-lookup"><span data-stu-id="b3bb3-119">Mail flow rule conditions and exceptions (predicates) in Exchange Online</span></span>](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/conditions-and-exceptions)

  - [<span data-ttu-id="b3bb3-120">Exchange Online의 메일 흐름 규칙 동작</span><span class="sxs-lookup"><span data-stu-id="b3bb3-120">Mail flow rule actions in Exchange Online</span></span>](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rule-actions)

## <a name="use-the-eac-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a><span data-ttu-id="b3bb3-121">EAC를 사용하여 실행 파일이 포함된 메시지를 차단하는 규칙 만들기</span><span class="sxs-lookup"><span data-stu-id="b3bb3-121">Use the EAC to create a rule that blocks messages with executable attachments</span></span>

1. <span data-ttu-id="b3bb3-122">EAC에서 **메일 흐름** \> **규칙**으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-122">In the EAC, go to **Mail flow** \> **Rules**.</span></span>

2. <span data-ttu-id="b3bb3-123">아이콘 **추가를** ![ 클릭한 다음 새 규칙 ](../../media/ITPro-EAC-AddIcon.png) **만들기를 선택합니다.**</span><span class="sxs-lookup"><span data-stu-id="b3bb3-123">Click **Add** ![Add icon](../../media/ITPro-EAC-AddIcon.png) and then select **Create a new rule**.</span></span>

3. <span data-ttu-id="b3bb3-124">\*\* 새\*\* 규칙 페이지에서 다음 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-124">In the **New rule** page that opens, configure the following settings:</span></span>

   - <span data-ttu-id="b3bb3-125">**이름:** 규칙을 설명하는 고유한 이름을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-125">**Name**: Enter a unique, descriptive name for the rule.</span></span>

   - <span data-ttu-id="b3bb3-126">기타 **옵션을 클릭합니다.**</span><span class="sxs-lookup"><span data-stu-id="b3bb3-126">Click **More Options**.</span></span>

   - <span data-ttu-id="b3bb3-127">**다음 의사실에 대해**다음 **규칙을 적용합니다. 첨부 파일에** 실행 가능한 \> **콘텐츠가 있습니다.**</span><span class="sxs-lookup"><span data-stu-id="b3bb3-127">**Apply this rule if**: Select **Any attachment** \> **has executable content**.</span></span>

   - <span data-ttu-id="b3bb3-128">**다음 작업을** **수행합니다. 메시지 차단을** 선택한 후 원하는 작업을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-128">**Do the following**: Select **Block the message** and then choose the action you want:</span></span>

     - <span data-ttu-id="b3bb3-129">**메시지를 거부하고 설명**포함: 표시되는 **Specify reject reason** 거부 이유 지정 대화 상자에서 배달 못 함 보고서(NDR 또는 반송 메시지라고도 함)에 표시될 텍스트를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-129">**reject the message and include an explanation**: In the **Specify reject reason** dialog that appears, enter the text you want to appear in the non-delivery report (also known as an NDR or bounce message).</span></span> <span data-ttu-id="b3bb3-130">사용되는 기본 확장 상태 코드는 5.7.1입니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-130">The default enhanced status code that's used is 5.7.1.</span></span>

     - <span data-ttu-id="b3bb3-131">**확장 상태 코드를 사용하여 메시지를 거부합니다.** 나타나는 확장 상태 **코드** 입력 대화 상자에 NDR에 표시하려는 확장 상태 코드를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-131">**reject the message with the enhanced status code of**:  In the **Enter enhanced status code** dialog that appears, enter the enhanced status code that you want to appear in the NDR.</span></span> <span data-ttu-id="b3bb3-132">유효한 값은 5.7.1이거나 5.7.900에서 5.7.999 사이의 값입니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-132">Valid values are 5.7.1 or a value from 5.7.900 to 5.7.999.</span></span> <span data-ttu-id="b3bb3-133">기본 거부 텍스트는 배달 권한이 부여되지 않았습니다. 메시지가 거부되었습니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-133">The default rejection text is: Delivery not authorized, message refused.</span></span>

     - <span data-ttu-id="b3bb3-134">**아무사용자에게도 도중하지 않기로 메시지 거부**</span><span class="sxs-lookup"><span data-stu-id="b3bb3-134">**reject the message without notifying anyone**</span></span>

4. <span data-ttu-id="b3bb3-135">작업을 마쳤으면 **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-135">When you're finished, click **Save**.</span></span> <span data-ttu-id="b3bb3-136">이제 첨부 파일 차단 규칙이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-136">Your attachment blocking rule is now in force.</span></span>

## <a name="use-powershell-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a><span data-ttu-id="b3bb3-137">PowerShell을 사용하여 실행 파일이 포함된 메시지를 차단하는 규칙 만들기</span><span class="sxs-lookup"><span data-stu-id="b3bb3-137">Use PowerShell to create a rule that blocks messages with executable attachments</span></span>

<span data-ttu-id="b3bb3-138">실행 파일을 포함하는 메시지를 차단하는 규칙을 만들려면 다음 구문을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-138">Use the following syntax to create a rule to blocks messages that contain executable attachments:</span></span>

```powershell
New-TransportRule -Name "<UniqueName>" -AttachmentHasExecutableContent $true [-RejectMessageEnhancedStatusCode <5.7.1 | 5.7.900 to 5.7.999>] [-RejectMessageReasonText "<Text>"] [-DeleteMessage $true]
```

<span data-ttu-id="b3bb3-139">**참고:**</span><span class="sxs-lookup"><span data-stu-id="b3bb3-139">**Notes**:</span></span>

- <span data-ttu-id="b3bb3-140">_RejectMessageReasonText_ _매개 변수 없이 RejectMessageEnhancedStatusCode_ 매개 변수를 사용할 경우 기본 텍스트는 배달 권한이 부여되지 않았다고 메시지가 거부됩니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-140">If you use the _RejectMessageEnhancedStatusCode_ parameter without the _RejectMessageReasonText_ parameter, the default text is: Delivery not authorized, message refused.</span></span>

- <span data-ttu-id="b3bb3-141">_RejectMessageEnhancedStatusCode_ 매개 변수 없이 _RejectMessageReasonText_ 매개 변수를 사용하는 경우 기본 코드는 5.7.1입니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-141">If you use the _RejectMessageReasonText_ parameter without the _RejectMessageEnhancedStatusCode_ parameter, the default code is 5.7.1.</span></span>

<span data-ttu-id="b3bb3-142">이 예에서는 실행 파일을 포함하는 메시지를 자동으로 삭제하는 Executable Attachments라는 새 규칙을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-142">This example creates a new rule named Block Executable Attachments that silently deletes messages that contain executable attachments.</span></span>

```powershell
New-TransportRule -Name "Block Executable Attachments" -AttachmentHasExecutableContent $true -DeleteMessage $true
```

<span data-ttu-id="b3bb3-143">자세한 구문 및 매개변수 정보 [New-TransportRule](https://docs.microsoft.com/powershell/module/exchange/new-transportrule)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-143">For detailed syntax and parameter information, see [New-TransportRule](https://docs.microsoft.com/powershell/module/exchange/new-transportrule).</span></span>

## <a name="how-do-you-know-this-worked"></a><span data-ttu-id="b3bb3-144">작동 여부는 어떻게 확인하나요?</span><span class="sxs-lookup"><span data-stu-id="b3bb3-144">How do you know this worked?</span></span>

<span data-ttu-id="b3bb3-145">실행 파일 첨부 파일이 포함된 메시지를 차단하는 메일 흐름 규칙을 성공적으로 만들었는지 확인하려면 다음 단계 중 하나를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-145">To verify that you've successfully create a mail flow rule to block messages that contain executable attachments, do any of the following steps:</span></span>

- <span data-ttu-id="b3bb3-146">EAC에서 메일 흐름 **Mail flow** 규칙으로 \> **이동하여 규칙** \> 편집 \> 아이콘을 선택한 **다음** ![ ](../../media/ITPro-EAC-EditIcon.png) 설정을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-146">In the EAC, go to **Mail flow** \> **Rules** \> select the rule \> click **Edit** ![Edit icon](../../media/ITPro-EAC-EditIcon.png), and verify the settings.</span></span>

- <span data-ttu-id="b3bb3-147">PowerShell에서 다음 명령을 실행하여 설정을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b3bb3-147">In PowerShell, run the following command to verify the settings:</span></span>

  ```powershell
  Get-TransportRule -Identity "<Rule Name>" | Format-List Name,AttachmentHasExecutableContent,RejectMessage*,DeleteMessage
  ```
