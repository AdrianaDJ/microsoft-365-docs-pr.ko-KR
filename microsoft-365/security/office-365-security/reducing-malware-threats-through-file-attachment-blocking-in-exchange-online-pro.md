---
title: 메일 흐름 규칙을 사용 하 여 실행 가능한 첨부 파일이 있는 메시지 차단
f1.keywords:
- NOCSH
ms.author: chrisda
author: chrisda
manager: dansimp
ms.date: ''
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Normal
ms.assetid: c4fb4a86-b772-49d0-8773-e8ee897e175d
ms.custom:
- seo-marvel-apr2020
description: 관리자는 메일 흐름 규칙 (전송 규칙)을 만들어 실행 가능한 첨부 파일이 포함 된 메시지를 차단 하는 방법에 대해 알아봅니다.
ms.openlocfilehash: 0d641b5e8e93f4cd65a4ae22f1d99df41bf5fc9c
ms.sourcegitcommit: c083602dda3cdcb5b58cb8aa070d77019075f765
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 09/22/2020
ms.locfileid: "48197238"
---
# <a name="use-mail-flow-rules-to-block-messages-with-executable-attachments-in-eop"></a><span data-ttu-id="6d0b9-103">메일 흐름 규칙을 사용하여 EOP에서 실행 파일이 첨부된 메시지 차단</span><span class="sxs-lookup"><span data-stu-id="6d0b9-103">Use mail flow rules to block messages with executable attachments in EOP</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]


<span data-ttu-id="6d0b9-104">Exchange online 사서함이 없는 Microsoft 365 조직의 EOP (독립 실행형 Exchange Online Protection) 조직에서 EOP는 맬웨어 방지 정책을 사용 하 여 실행 파일이 있는 메시지를 포함 하는 유해한 메시지를 차단 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-104">In Microsoft 365 organizations with mailboxes in Exchange Online or standalone Exchange Online Protection (EOP) organizations without Exchange Online mailboxes, EOP uses anti-malware policies to block harmful messages, including messages with executable attachments.</span></span> <span data-ttu-id="6d0b9-105">자세한 내용은 [EOP의 맬웨어 방지 보호](anti-malware-protection.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-105">For more information, see [Anti-malware protection in EOP](anti-malware-protection.md).</span></span>

<span data-ttu-id="6d0b9-106">보다 효율적으로 보호 기능을 강화 하려면 메일 흐름 규칙 (전송 규칙이 라고도 함)을 사용 하 여이 항목에서 설명 하는 실행 가능한 첨부 파일이 포함 된 메시지를 식별 하 고 차단 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-106">To further enhance protection, you can use mail flow rules (also known as transport rules) to identify and block messages that contain executable attachments as described in this topic.</span></span>

<span data-ttu-id="6d0b9-107">예를 들어, 맬웨어 발생 후 회사는 해당 사용자가 지정 된 기간에 첨부 파일을 보낼 수 있도록 시간 제한에이 규칙을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-107">For example, following a malware outbreak, a company could apply this rule with a time limit so that affected users can get back to sending attachments after a specified length of time.</span></span>

## <a name="what-do-you-need-to-know-before-you-begin"></a><span data-ttu-id="6d0b9-108">시작하기 전에 알아야 할 내용</span><span class="sxs-lookup"><span data-stu-id="6d0b9-108">What do you need to know before you begin?</span></span>

- <span data-ttu-id="6d0b9-109">다음 절차를 수행 하려면 먼저 사용 권한을 할당 받아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-109">You need to be assigned permissions before you can do these procedures:</span></span>

  - <span data-ttu-id="6d0b9-110">Exchange Online에서 [Exchange online의](https://docs.microsoft.com/Exchange/permissions-exo/feature-permissions)"메일 흐름" 항목을 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-110">In Exchange Online, see the "Mail flow" entry in [Feature Permissions in Exchange Online](https://docs.microsoft.com/Exchange/permissions-exo/feature-permissions).</span></span>
  
  - <span data-ttu-id="6d0b9-111">독립 실행형 EOP에서는 기본적으로 OrganizationManagement, ComplianceManagement 및 레코드 관리 역할에 할당 되는 전송 규칙 역할이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-111">In standalone EOP, you need the Transport Rules role, which is assigned to the OrganizationManagement, ComplianceManagement, and RecordsManagement roles by default.</span></span> <span data-ttu-id="6d0b9-112">자세한 내용은 [권한 독립 실행형 EOP의 사용 권한을](feature-permissions-in-eop.md) 참조 하 고 [EAC를 사용 하 여 역할 그룹의 구성원 목록을 수정](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups)합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-112">For more information, see [Permissions in standalone EOP](feature-permissions-in-eop.md) and [Use the EAC modify the list of members in role groups](manage-admin-role-group-permissions-in-eop.md#use-the-eac-modify-the-list-of-members-in-role-groups).</span></span>

- <span data-ttu-id="6d0b9-113">Exchange Online에서 EAC를 열려면 exchange [online의 exchange 관리 센터](https://docs.microsoft.com/Exchange/exchange-admin-center)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-113">To open the EAC in Exchange Online, see [Exchange admin center in Exchange Online](https://docs.microsoft.com/Exchange/exchange-admin-center).</span></span> <span data-ttu-id="6d0b9-114">독립 실행형 EOP에서 EAC를 열려면 [독립 실행형 EOP에서 Exchange 관리 센터](exchange-admin-center-in-exchange-online-protection-eop.md)를 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-114">To open the EAC in standalone EOP, see [Exchange admin center in standalone EOP](exchange-admin-center-in-exchange-online-protection-eop.md).</span></span>

- <span data-ttu-id="6d0b9-115">Exchange Online PowerShell에 연결하려면 [Exchange Online PowerShell에 연결](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-115">To connect to Exchange Online PowerShell, see [Connect to Exchange Online PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-powershell).</span></span> <span data-ttu-id="6d0b9-116">독립 실행형 EOP PowerShell에 연결하려면 [Exchange Online Protection PowerShell에 연결](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-protection-powershell)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-116">To connect to standalone EOP PowerShell, see [Connect to Exchange Online Protection PowerShell](https://docs.microsoft.com/powershell/exchange/connect-to-exchange-online-protection-powershell).</span></span>

- <span data-ttu-id="6d0b9-117">Exchange Online 및 독립 실행형 EOP의 메일 흐름 규칙에 대 한 자세한 내용은 다음 항목을 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-117">For more information about mail flow rules in Exchange Online and standalone EOP, see the following topics:</span></span>

  - [<span data-ttu-id="6d0b9-118">Exchange Online의 메일 흐름 규칙 (전송 규칙)</span><span class="sxs-lookup"><span data-stu-id="6d0b9-118">Mail flow rules (transport rules) in Exchange Online</span></span>](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rules)

  - [<span data-ttu-id="6d0b9-119">메일 흐름 규칙 조건 및 예외 (조건자)가 Exchange Online에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-119">Mail flow rule conditions and exceptions (predicates) in Exchange Online</span></span>](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/conditions-and-exceptions)

  - [<span data-ttu-id="6d0b9-120">Exchange Online의 메일 흐름 규칙 동작</span><span class="sxs-lookup"><span data-stu-id="6d0b9-120">Mail flow rule actions in Exchange Online</span></span>](https://docs.microsoft.com/Exchange/security-and-compliance/mail-flow-rules/mail-flow-rule-actions)

## <a name="use-the-eac-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a><span data-ttu-id="6d0b9-121">EAC를 사용 하 여 실행 가능한 첨부 파일이 있는 메시지를 차단 하는 규칙 만들기</span><span class="sxs-lookup"><span data-stu-id="6d0b9-121">Use the EAC to create a rule that blocks messages with executable attachments</span></span>

1. <span data-ttu-id="6d0b9-122">EAC에서 **메일 흐름** \> **규칙**으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-122">In the EAC, go to **Mail flow** \> **Rules**.</span></span>

2. <span data-ttu-id="6d0b9-123">추가 아이콘 추가를 **클릭 한** ![ ](../../media/ITPro-EAC-AddIcon.png) 다음 **새 규칙 만들기**를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-123">Click **Add** ![Add icon](../../media/ITPro-EAC-AddIcon.png) and then select **Create a new rule**.</span></span>

3. <span data-ttu-id="6d0b9-124">**새 규칙** 페이지가 열리면 다음 설정을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-124">In the **New rule** page that opens, configure the following settings:</span></span>

   - <span data-ttu-id="6d0b9-125">**이름**: 규칙에 대 한 설명이 포함 된 고유 이름을 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-125">**Name**: Enter a unique, descriptive name for the rule.</span></span>

   - <span data-ttu-id="6d0b9-126">**기타 옵션**을 클릭 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-126">Click **More Options**.</span></span>

   - <span data-ttu-id="6d0b9-127">다음의 **경우이 규칙 적용**: **Any attachment** \> **실행 가능한 콘텐츠가**있는 첨부 파일을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-127">**Apply this rule if**: Select **Any attachment** \> **has executable content**.</span></span>

   - <span data-ttu-id="6d0b9-128">**메시지 차단을** 선택 하 고 원하는 작업을 선택 하 **여 다음을 수행 합니다**.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-128">**Do the following**: Select **Block the message** and then choose the action you want:</span></span>

     - <span data-ttu-id="6d0b9-129">**메시지를 거부 하 고 설명을 포함**합니다. 표시 되는 **거부 이유 지정** 대화 상자에서 배달 못 함 보고서 (NDR 또는 바운스 메시지)에 표시할 텍스트를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-129">**reject the message and include an explanation**: In the **Specify reject reason** dialog that appears, enter the text you want to appear in the non-delivery report (also known as an NDR or bounce message).</span></span> <span data-ttu-id="6d0b9-130">사용 되는 기본 확장 상태 코드는 5.7.1입니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-130">The default enhanced status code that's used is 5.7.1.</span></span>

     - <span data-ttu-id="6d0b9-131">**메시지를 거부 하 고 확장**상태 코드 **입력** 대화 상자에서 NDR에 표시할 확장 상태 코드를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-131">**reject the message with the enhanced status code of**:  In the **Enter enhanced status code** dialog that appears, enter the enhanced status code that you want to appear in the NDR.</span></span> <span data-ttu-id="6d0b9-132">유효한 값은 5.7.1 또는 5.7.900에서 5.7.999 사이의 값입니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-132">Valid values are 5.7.1 or a value from 5.7.900 to 5.7.999.</span></span> <span data-ttu-id="6d0b9-133">기본 거부 텍스트: 배달이 승인 되지 않아 메시지가 거부 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-133">The default rejection text is: Delivery not authorized, message refused.</span></span>

     - <span data-ttu-id="6d0b9-134">**아무 에게도 알리지 않고 메시지 거부**</span><span class="sxs-lookup"><span data-stu-id="6d0b9-134">**reject the message without notifying anyone**</span></span>

4. <span data-ttu-id="6d0b9-135">작업을 마쳤으면 **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-135">When you're finished, click **Save**.</span></span> <span data-ttu-id="6d0b9-136">이제 첨부 파일 차단 규칙이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-136">Your attachment blocking rule is now in force.</span></span>

## <a name="use-powershell-to-create-a-rule-that-blocks-messages-with-executable-attachments"></a><span data-ttu-id="6d0b9-137">PowerShell을 사용 하 여 실행 가능한 첨부 파일이 있는 메시지를 차단 하는 규칙 만들기</span><span class="sxs-lookup"><span data-stu-id="6d0b9-137">Use PowerShell to create a rule that blocks messages with executable attachments</span></span>

<span data-ttu-id="6d0b9-138">다음 구문을 사용 하 여 실행 파일이 포함 된 메시지를 차단 하는 규칙을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-138">Use the following syntax to create a rule to blocks messages that contain executable attachments:</span></span>

```powershell
New-TransportRule -Name "<UniqueName>" -AttachmentHasExecutableContent $true [-RejectMessageEnhancedStatusCode <5.7.1 | 5.7.900 to 5.7.999>] [-RejectMessageReasonText "<Text>"] [-DeleteMessage $true]
```

<span data-ttu-id="6d0b9-139">**참고:**</span><span class="sxs-lookup"><span data-stu-id="6d0b9-139">**Notes**:</span></span>

- <span data-ttu-id="6d0b9-140">_RejectMessageReasonText_ 매개 변수 없이 _RejectMessageEnhancedStatusCode_ 매개 변수를 사용 하는 경우 기본 텍스트는: 배달이 허용 되지 않아 메시지가 거부 됨입니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-140">If you use the _RejectMessageEnhancedStatusCode_ parameter without the _RejectMessageReasonText_ parameter, the default text is: Delivery not authorized, message refused.</span></span>

- <span data-ttu-id="6d0b9-141">_RejectMessageEnhancedStatusCode_ 매개 변수 없이 _RejectMessageReasonText_ 매개 변수를 사용 하는 경우 기본 코드는 5.7.1입니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-141">If you use the _RejectMessageReasonText_ parameter without the _RejectMessageEnhancedStatusCode_ parameter, the default code is 5.7.1.</span></span>

<span data-ttu-id="6d0b9-142">이 예제에서는 실행 가능한 첨부 파일이 포함 된 메시지를 자동으로 삭제 하는 Block 실행 파일 차단 이라는 새 규칙을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-142">This example creates a new rule named Block Executable Attachments that silently deletes messages that contain executable attachments.</span></span>

```powershell
New-TransportRule -Name "Block Executable Attachments" -AttachmentHasExecutableContent $true -DeleteMessage $true
```

<span data-ttu-id="6d0b9-143">자세한 구문 및 매개변수 정보 [New-TransportRule](https://docs.microsoft.com/powershell/module/exchange/new-transportrule)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-143">For detailed syntax and parameter information, see [New-TransportRule](https://docs.microsoft.com/powershell/module/exchange/new-transportrule).</span></span>

## <a name="how-do-you-know-this-worked"></a><span data-ttu-id="6d0b9-144">작동 여부는 어떻게 확인하나요?</span><span class="sxs-lookup"><span data-stu-id="6d0b9-144">How do you know this worked?</span></span>

<span data-ttu-id="6d0b9-145">실행 파일이 포함 된 메시지를 차단 하는 메일 흐름 규칙을 성공적으로 만들었는지 확인 하려면 다음 단계 중 하나를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-145">To verify that you've successfully create a mail flow rule to block messages that contain executable attachments, do any of the following steps:</span></span>

- <span data-ttu-id="6d0b9-146">EAC에서 **메일 흐름** \> **규칙** 을 \> 선택 하 \> **Edit** ![ 고 편집 아이콘 편집 ](../../media/ITPro-EAC-EditIcon.png) 을 클릭 한 다음 설정을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-146">In the EAC, go to **Mail flow** \> **Rules** \> select the rule \> click **Edit** ![Edit icon](../../media/ITPro-EAC-EditIcon.png), and verify the settings.</span></span>

- <span data-ttu-id="6d0b9-147">PowerShell에서 다음 명령을 실행 하 여 설정을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="6d0b9-147">In PowerShell, run the following command to verify the settings:</span></span>

  ```powershell
  Get-TransportRule -Identity "<Rule Name>" | Format-List Name,AttachmentHasExecutableContent,RejectMessage*,DeleteMessage
  ```
